<?xml version="1.0" encoding="UTF-8"?>
<template name="com.wso2telco.dep.common.clientCorrelator.generator.Template" xmlns="http://ws.apache.org/ns/synapse">
    <parameter name="clientCorrelator"/>
    <sequence>
        <filter xpath="not(boolean(fn:normalize-space($func:clientCorrelator)))">
            <then>
                <property expression="get-property('REQUEST_ID')" name="uniqueClientCorrelator" scope="default" type="STRING"/>
            </then>
            <else>
                <class name="com.wso2telco.dep.common.mediation.UtilMediator">
					<property name="propertyValue" value="partialRequestId" />
				</class>
                <property expression="fn:concat($func:clientCorrelator , ':' , get-property('PARTIAL_REQUEST_ID'))" name="uniqueClientCorrelator" scope="default" type="STRING"/>
            </else>
        </filter>
    </sequence>
</template>
